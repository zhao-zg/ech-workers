# ECH-Workers Android å®¢æˆ·ç«?

ECH-Workers çš?Android VPN å®¢æˆ·ç«¯ï¼Œæ”¯æŒæ™ºèƒ½åˆ†æµå’Œå¤šé…ç½®ç®¡ç†ã€?

## åŠŸèƒ½ç‰¹æ€?

- âœ?VPN éš§é“æ¨¡å¼ï¼ˆåŸºäº?hev-socks5-tunnelï¼?
- âœ?SOCKS5/HTTP ä»£ç†æ”¯æŒ
- âœ?ECH (Encrypted Client Hello) æ”¯æŒ
- âœ?æ™ºèƒ½åˆ†æµï¼ˆå…¨å±€/è·³è¿‡ä¸­å›½å¤§é™†/ç›´è¿ï¼?
- âœ?åˆ†åº”ç”¨ä»£ç?
- âœ?å¤šé…ç½®æ–‡ä»¶ç®¡ç?
- âœ?è‡ªåŠ¨æ›´æ–°ä¸­å›½ IP åˆ—è¡¨
- âœ?IPv4/IPv6 åŒæ ˆæ”¯æŒ

## ç³»ç»Ÿè¦æ±‚

- Android 7.0 (API 24) æˆ–æ›´é«˜ç‰ˆæœ?
- æ”¯æŒæ¶æ„ï¼šarmeabi-v7a, arm64-v8a, x86, x86_64

## å®‰è£…

### æ–¹å¼ä¸€ï¼šä¸‹è½?APK
```bash
# ä¸‹è½½é¢„ç¼–è¯‘çš„ APK
wget https://github.com/zhao-zg/ech-workers/releases/latest/download/ech-workers.apk

# å®‰è£…
adb install ech-workers.apk
```

### æ–¹å¼äºŒï¼šä»æºç ç¼–è¯?
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/zhao-zg/ech-workers.git
cd ech-workers/android

# ç¼–è¯‘
./gradlew assembleRelease

# è¾“å‡ºä½ç½®
# build/outputs/apk/release/ech-workers-release.apk
```

## é…ç½®è¯´æ˜

### åŸºæœ¬è®¾ç½®

1. **æœåŠ¡å™¨åœ°å€**: Cloudflare Workers åœ°å€
   - æ ¼å¼ï¼š`your-worker.workers.dev:443`
   - æ”¯æŒè‡ªå®šä¹‰è·¯å¾„ï¼š`your-worker.workers.dev:443/path`

2. **æœ¬åœ°ä»£ç†ç«¯å£**: é»˜è®¤ 1080
   - èŒƒå›´ï¼?024-65535
   - ç”¨äº VPN éš§é“å†…éƒ¨é€šä¿¡

3. **ä¼˜é€‰IPï¼ˆåŸŸåï¼‰**: å¯é€?
   - å¯ä»¥æ˜?IP åœ°å€ï¼š`1.2.3.4`
   - ä¹Ÿå¯ä»¥æ˜¯åŸŸåï¼š`cf.example.com`
   - ç”¨äºç»•è¿‡ DNS è§£ææˆ–ä½¿ç”¨å¤‡ç”¨åœ°å€

4. **èº«ä»½ä»¤ç‰Œ**: å¯é€?
   - ç”¨äºæœåŠ¡ç«¯éªŒè¯?
   - ä¸æœåŠ¡ç«¯é…ç½®ä¸€è‡?

### ECH é…ç½®

1. **ECH DoH æœåŠ¡å™?*: 
   - é»˜è®¤ï¼š`dns.alidns.com/dns-query`
   - ç”¨äºæŸ¥è¯¢ ECH å…¬é’¥

2. **ECH æŸ¥è¯¢åŸŸå**:
   - é»˜è®¤ï¼š`cloudflare-ech.com`
   - ECH å…¬é’¥æ‰€åœ¨çš„åŸŸå

### åˆ†æµæ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| å…¨å±€ä»£ç† | æ‰€æœ‰æµé‡é€šè¿‡ä»£ç† | å®Œå…¨éšç§ä¿æŠ¤ |
| è·³è¿‡ä¸­å›½å¤§é™† | å›½å†…ç›´è¿ï¼Œå›½å¤–ä»£ç?| æ—¥å¸¸ä½¿ç”¨ï¼ŒèŠ‚çœæµé‡?|
| ç›´è¿æ¨¡å¼ | æ‰€æœ‰æµé‡ç›´è¿?| æµ‹è¯•æˆ–ç¦ç”¨ä»£ç?|

### ä»£ç†æ¨¡å¼

- **å…¨å±€ä»£ç†**: æ‰€æœ‰åº”ç”¨çš„æµé‡éƒ½èµ°ä»£ç†
- **åˆ†åº”ç”¨ä»£ç?*: ä»…é€‰ä¸­çš„åº”ç”¨èµ°ä»£ç†

## ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨

1. æ‰“å¼€åº”ç”¨å¹¶æˆäº?VPN æƒé™
2. é…ç½®æœåŠ¡å™¨åœ°å€
3. é€‰æ‹©åˆ†æµæ¨¡å¼
4. ç‚¹å‡»"å¯åŠ¨"æŒ‰é’®

### é…ç½®ç®¡ç†

#### æ·»åŠ é…ç½®
1. ç‚¹å‡»"æ·»åŠ "æŒ‰é’®
2. è¾“å…¥é…ç½®åç§°
3. é…ç½®å‚æ•°
4. ç‚¹å‡»"ä¿å­˜"

#### åˆ‡æ¢é…ç½®
1. åœ¨é…ç½®ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©
2. è‡ªåŠ¨åŠ è½½å¯¹åº”é…ç½®

#### åˆ é™¤é…ç½®
1. é€‰æ‹©è¦åˆ é™¤çš„é…ç½®
2. ç‚¹å‡»"åˆ é™¤"æŒ‰é’®
3. ç¡®è®¤åˆ é™¤ï¼ˆè‡³å°‘ä¿ç•™ä¸€ä¸ªé…ç½®ï¼‰

### åˆ†åº”ç”¨ä»£ç?

1. å–æ¶ˆå‹¾é€?å…¨å±€ä»£ç†"
2. ç‚¹å‡»"åˆ†åº”ç”¨ä»£ç?æŒ‰é’®
3. é€‰æ‹©éœ€è¦ä»£ç†çš„åº”ç”¨
4. ä¿å­˜å¹¶å¯åŠ?

## ä¸­å›½ IP åˆ—è¡¨

### è‡ªåŠ¨ç®¡ç†

åº”ç”¨ä¼šè‡ªåŠ¨ï¼š
- é¦–æ¬¡ä½¿ç”¨æ—¶ä¸‹è½?IP åˆ—è¡¨
- ç¼“å­˜åˆ°æœ¬åœ°å­˜å‚?
- æ¯?7 å¤©è‡ªåŠ¨æ£€æŸ¥æ›´æ–?
- å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯?

### æ‰‹åŠ¨æ›´æ–°

æš‚ä¸æ”¯æŒæ‰‹åŠ¨è§¦å‘æ›´æ–°ï¼Œåº”ç”¨ä¼šåœ¨åå°è‡ªåŠ¨å¤„ç†ã€?

### æ•°æ®æ¥æº

- IPv4: https://github.com/mayaxcn/china-ip-list
- IPv6: https://github.com/mayaxcn/china-ip-list

## æ•…éšœæ’é™¤

### è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: æ˜¾ç¤º"ä»£ç†å¤±è´¥"æˆ–æ— æ³•è¿æ?

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
3. å°è¯•é…ç½®ä¼˜é€‰IPï¼ˆåŸŸåï¼‰
4. æ£€æŸ¥èº«ä»½ä»¤ç‰Œæ˜¯å¦åŒ¹é…?
5. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—

### VPN æƒé™è¢«æ‹’ç»?

**ç—‡çŠ¶**: å¯åŠ¨æ—¶æç¤ºæƒé™é”™è¯?

**è§£å†³æ–¹æ¡ˆ**:
1. å¸è½½å…¶ä»– VPN åº”ç”¨
2. é‡å¯åº”ç”¨å¹¶é‡æ–°æˆæ?
3. æ£€æŸ¥ç³»ç»Ÿè®¾ç½®ä¸­çš?VPN æƒé™

### IP åˆ—è¡¨ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º"ä¸‹è½½ IP åˆ—è¡¨å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ?
2. ç¡®è®¤å¯ä»¥è®¿é—® GitHub
3. ä¸´æ—¶åˆ‡æ¢åˆ?å…¨å±€ä»£ç†"æ¨¡å¼
4. ç­‰å¾…è‡ªåŠ¨é‡è¯•

### åˆ†æµä¸ç”Ÿæ•?

**ç—‡çŠ¶**: å›½å†…ç½‘ç«™ä¹Ÿèµ°ä»£ç†

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤é€‰æ‹©äº?è·³è¿‡ä¸­å›½å¤§é™†"æ¨¡å¼
2. æ£€æŸ?IP åˆ—è¡¨æ˜¯å¦å·²åŠ è½?
3. é‡å¯åº”ç”¨
4. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤åˆ†æµé€»è¾‘

## æŸ¥çœ‹æ—¥å¿—

ä½¿ç”¨ adb æŸ¥çœ‹æ—¥å¿—ï¼?

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿?
adb logcat | grep -E "TProxyService|Tunnel|ChinaIpListManager"

# ä»…æŸ¥çœ‹é”™è¯?
adb logcat *:E | grep -E "TProxyService|Tunnel"

# ä¿å­˜æ—¥å¿—åˆ°æ–‡ä»?
adb logcat -d > ech-workers.log
```

## å¼€å‘æ„å»?

### ç¯å¢ƒè¦æ±‚

- Android SDK 34
- NDK 26.3.11579264
- Go 1.24+ (æ”¯æŒ ECH)
- Gradle 8.0+
- JDK 17

### æ„å»ºæ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/zhao-zg/ech-workers.git
cd ech-workers/android

# 2. ç¼–è¯‘ Go åº“ï¼ˆå¯é€‰ï¼Œå·²é¢„ç¼–è¯‘ï¼?
cd ../tunnel
gomobile bind -target=android -o ../android/libs/tunnel.aar .

# 3. ç¼–è¯‘ Android åº”ç”¨
cd ../android
./gradlew assembleDebug      # è°ƒè¯•ç‰ˆæœ¬
./gradlew assembleRelease    # å‘å¸ƒç‰ˆæœ¬

# 4. è¾“å‡ºä½ç½®
# build/outputs/apk/debug/ech-workers-debug.apk
# build/outputs/apk/release/ech-workers-release.apk
```

### ç­¾åé…ç½®

åˆ›å»º `store.properties`ï¼?

```properties
storeFile=your-keystore.jks
storePassword=your-store-password
keyAlias=your-key-alias
keyPassword=your-key-password
```

## é¡¹ç›®ç»“æ„

```
android/
â”œâ”€â”€ build.gradle              # Gradle æ„å»ºé…ç½®
â”œâ”€â”€ src/main/
â”?  â”œâ”€â”€ AndroidManifest.xml   # åº”ç”¨æ¸…å•
â”?  â”œâ”€â”€ java/com/ech/workers/ # Java æºä»£ç ?
â”?  â”?  â”œâ”€â”€ MainActivity.java
â”?  â”?  â”œâ”€â”€ TProxyService.java
â”?  â”?  â”œâ”€â”€ Preferences.java
â”?  â”?  â”œâ”€â”€ ChinaIpListManager.java
â”?  â”?  â”œâ”€â”€ AppListActivity.java
â”?  â”?  â””â”€â”€ ServiceReceiver.java
â”?  â”œâ”€â”€ jni/                  # JNI æœ¬åœ°ä»£ç 
â”?  â”?  â”œâ”€â”€ Android.mk
â”?  â”?  â””â”€â”€ hev-socks5-tunnel/
â”?  â””â”€â”€ res/                  # èµ„æºæ–‡ä»¶
â”?      â”œâ”€â”€ layout/main.xml
â”?      â””â”€â”€ values/strings.xml
â””â”€â”€ libs/                     # ç¬¬ä¸‰æ–¹åº“
    â””â”€â”€ tunnel.aar            # Go ç¼–è¯‘çš„åº“
```

## æ€§èƒ½æ•°æ®

- **APK å¤§å°**: ~5-8 MB
- **è¿è¡Œå†…å­˜**: 15-30 MB
- **IP åˆ—è¡¨**: 1-2 MB
- **ç”µæ± æ¶ˆè€?*: ä¸­ç­‰ï¼ˆå–å†³äºä½¿ç”¨é‡ï¼‰
- **CPU å ç”¨**: < 5%ï¼ˆç©ºé—²æ—¶ï¼?

## éšç§è¯´æ˜

åº”ç”¨æ”¶é›†çš„æ•°æ®ï¼š
- âœ?é…ç½®ä¿¡æ¯ï¼ˆä»…æœ¬åœ°å­˜å‚¨ï¼?
- âœ?IP åˆ—è¡¨ç¼“å­˜ï¼ˆä»…æœ¬åœ°å­˜å‚¨ï¼?
- â?ä¸æ”¶é›†ä¸ªäººä¿¡æ?
- â?ä¸ä¸Šä¼ æµè§ˆæ•°æ?
- â?ä¸è¿½è¸ªç”¨æˆ·è¡Œä¸?

## æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-12-11)
- âœ?æ·»åŠ æ™ºèƒ½åˆ†æµåŠŸèƒ½
- âœ?æ”¯æŒè·³è¿‡ä¸­å›½å¤§é™†æ¨¡å¼
- âœ?è‡ªåŠ¨ç®¡ç†ä¸­å›½ IP åˆ—è¡¨
- âœ?ä¼˜åŒ– ECH é…ç½®æ–¹å¼
- âœ?æ”¹è¿› UI ç•Œé¢

### v1.0.0
- âœ?åˆå§‹ç‰ˆæœ¬
- âœ?ECH æ”¯æŒ
- âœ?VPN éš§é“
- âœ?å¤šé…ç½®ç®¡ç?

## è®¸å¯è¯?

GPL-3.0 License - è¯¦è§ [LICENSE](../LICENSE)

## ç›¸å…³èµ„æº

- [é¡¹ç›®ä¸»é¡µ](https://github.com/zhao-zg/ech-workers)
- [OpenWrt å®¢æˆ·ç«¯](../openwrt/README.md)
- [é—®é¢˜åé¦ˆ](https://github.com/zhao-zg/ech-workers/issues)

## è‡´è°¢

- [hev-socks5-tunnel](https://github.com/heiher/hev-socks5-tunnel)
- [mayaxcn/china-ip-list](https://github.com/mayaxcn/china-ip-list)
